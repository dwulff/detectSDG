<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>text2sdg: Detecting UN Sustainable Development Goals in Text • text2sdg</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="text2sdg: Detecting UN Sustainable Development Goals in Text">
<meta property="og:description" content="text2sdg">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">text2sdg</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/text2sdg.html">Overview</a>
</li>
<li>
  <a href="../articles/text2sdg.html">Tutorial</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dwulff/text2sdg" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>text2sdg: Detecting UN Sustainable Development
Goals in Text</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dwulff/text2sdg/blob/HEAD/vignettes/text2sdg.Rmd" class="external-link"><code>vignettes/text2sdg.Rmd</code></a></small>
      <div class="hidden name"><code>text2sdg.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The United Nations’ Sustainable Development Goals (SDGs) have become
an important guideline for organizations to monitor and plan their
contributions to social, economic, and environmental transformations.
Existing approaches to identify efforts addressing each of the 17 goals
rely on economic indicators or, in the case of academic output, on
search engines of academic databases. <code>text2sdg</code> is the first
open source, multi-system tool to detect SDGs in text.</p>
<p>The <code>text2sdg</code> package consists of five functions:
<code><a href="../reference/detect_sdg.html">detect_sdg()</a></code>, <code><a href="../reference/detect_sdg_systems.html">detect_sdg_systems()</a></code>,
<code><a href="../reference/detect_any.html">detect_any()</a></code>, <code><a href="../reference/plot_sdg.html">plot_sdg()</a></code>, and
<code><a href="../reference/crosstab_sdg.html">crosstab_sdg()</a></code>. The function <code><a href="../reference/detect_sdg.html">detect_sdg()</a></code>
carries out the detection of SDGs in text using a trained machine
learning model, whereas <code><a href="../reference/detect_sdg_systems.html">detect_sdg_systems()</a></code> does so using
up to six different query systems. The function
<code><a href="../reference/detect_any.html">detect_any()</a></code> enables search for custom search queries.
Finally, the functions <code><a href="../reference/plot_sdg.html">plot_sdg()</a></code> and
<code><a href="../reference/crosstab_sdg.html">crosstab_sdg()</a></code> help visualize and analyze the resulting SDG
matches.</p>
</div>
<div class="section level2">
<h2 id="detecting-sdgs-using-detect_sdg">Detecting SDGs using <code>detect_sdg()</code><a class="anchor" aria-label="anchor" href="#detecting-sdgs-using-detect_sdg"></a>
</h2>
<p>The <code><a href="../reference/detect_sdg.html">detect_sdg()</a></code> function identifies SDGs in texts that
are provided via the <code>text</code> argument. Inputs to
<code>text</code> must either be a character vector or an object of
<code>tCorpus</code> from package <code>corpustools</code>.
<code>text</code> is the only non-default argument of the function,
which means that the function can be run with only the texts as input.
The output of the function is a <code>tibble</code> with one row per
match including the following columns (and types):</p>
<ul>
<li>
<code>document</code> (<code>factor</code>) - index of element in
the character vector or corpus supply for <code>text</code>
</li>
<li>
<code>sdg</code> (<code>character</code>) - labels indicating the
matched SDGs</li>
<li>
<code>system</code> (<code>character</code>) - the query system that
produced the match</li>
<li>
<code>hit</code> (<code>numeric</code>) - running index of
matches</li>
</ul>
<p>The <code><a href="../reference/detect_sdg.html">detect_sdg()</a></code> function implements a ensemble model
based on a random forest architecture that pools the predictions of six
labeling systems generated using <code><a href="../reference/detect_sdg_systems.html">detect_sdg_systems()</a></code> and
also considers text length. The ensemble model can be run for any subset
of the 17 SDGs by using the <code>sdgs</code> argument. Our research
shows that the ensemble model implemented by <code><a href="../reference/detect_sdg.html">detect_sdg()</a></code>
outperforms any individual labeling system and the OSDG tool developed
by the UN SDG AI Lab (Wulff, Meier, &amp; Mata, 2023).</p>
<p>The example below runs the <code><a href="../reference/detect_sdg.html">detect_sdg()</a></code> function for the
<code>projects</code> data set included in the package and prints the
results. The data set is a character vector containing 500 descriptions
of randomly selected University of Basel research projects that were
funded by the Swiss National Science Foundation
(<a href="https://p3.snf.ch" class="external-link">https://p3.snf.ch</a>). The analysis
produced a total of <code>62</code> matches.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># detecting SDGs in projects</span></span>
<span><span class="va">hits_default</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/detect_sdg.html">detect_sdg</a></span><span class="op">(</span><span class="va">projects</span><span class="op">)</span></span>
<span><span class="va">hits_default</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="detecting-sdgs-using-detect_sdg_systems">Detecting SDGs using <code>detect_sdg_systems()</code><a class="anchor" aria-label="anchor" href="#detecting-sdgs-using-detect_sdg_systems"></a>
</h2>
<p>The <code><a href="../reference/detect_sdg_systems.html">detect_sdg_systems()</a></code> function generates SDG labels
by using up to six different SDG labeling systems. The function works
similarly to <code><a href="../reference/detect_sdg.html">detect_sdg()</a></code> but has additional arguments to
control which systems are run and the aggregation of the output. The
output is a <code>tibble</code> with one row per match including the
following columns (and types):</p>
<ul>
<li>
<code>document</code> (<code>factor</code>) - index of element in
the character vector or corpus supply for <code>text</code>
</li>
<li>
<code>sdg</code> (<code>character</code>) - labels indicating the
matched SDGs</li>
<li>
<code>system</code> (<code>character</code>) - the query system that
produced the match</li>
<li>
<code>query_id</code> (<code>integer</code>) - identifier of query
in the query system</li>
<li>
<code>features</code> (<code>character</code>) - words in the
document that were matched by the query</li>
<li>
<code>hit</code> (<code>numeric</code>) - running index of matches
for each query system</li>
</ul>
<p>The example below runs the <code><a href="../reference/detect_sdg_systems.html">detect_sdg_systems()</a></code> function
for the <code>projects</code> data. The analysis produced a total of
<code>835</code> matches using the four default query systems Aurora,
Elsevier, Auckland, and SIRIS.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># detecting SDGs in projects</span></span>
<span><span class="va">hits_default</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/detect_sdg_systems.html">detect_sdg_systems</a></span><span class="op">(</span><span class="va">projects</span><span class="op">)</span></span>
<span><span class="va">hits_default</span></span></code></pre></div>
<div class="section level3">
<h3 id="selecting-query-systems">Selecting query systems<a class="anchor" aria-label="anchor" href="#selecting-query-systems"></a>
</h3>
<p>By default <code>sdg_detect_systems()</code> runs the four query
systems, Aurora, Elsevier, Auckland, and SIRIS. Using the function’s
<code>system</code> argument the user can control which systems are run.
There are two additional query systems that can be selected, SDSN and
SDGO. These two systems are much simpler and less restrictive than the
former four as they only rely on basic keyword matching, whereas the
four default systems are based on more complex search queries. As a
result, the four default systems are more specific but also more prone
to misses, whereas the two optional systems are more sensitive but also
more prone to false alarms. Our research suggests that the four default
systems are likely more accurate in balanced datasets including
SDG-related and SDG-unrelated content (Wulff, Meier, &amp; Mata, 2023).
More information about the systems can be gathered from the help files
of the respective query data frames, <code>aurora_queries</code>,
<code>elsevier_queries</code>, <code>auckland_queries</code>,
<code>siris_queries</code>, <code>sdsn_queries</code>, and
<code>sdgo_queries</code>.</p>
<p>The example below runs the <code><a href="../reference/detect_sdg_systems.html">detect_sdg_systems()</a></code> on the
<code>projects</code> using all query systems, including the two
keyword-based systems. The resulting <code>tibble</code>s reveal that
Aurora is most conservative (60 hits), followed by SIRIS (166), Elsevier
(235), Auckland (374), and then by large margin the two keyword-based
systems SDSN (2,589) and SDGO (3,629). Note that the high numbers for
the two keyword-based systems imply that, on average, 5 and 7 SDGs,
respectively, are identified per document.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># detecting SDGs using all query systems</span></span>
<span><span class="va">hits_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/detect_sdg_systems.html">detect_sdg_systems</a></span><span class="op">(</span><span class="va">projects</span>,</span>
<span>  system <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Aurora"</span>, <span class="st">"Elsevier"</span>, <span class="st">"Auckland"</span>, <span class="st">"SIRIS"</span>, <span class="st">"SDSN"</span>, <span class="st">"SDGO"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Running Aurora</span></span>
<span><span class="co">#&gt; Running Elsevier</span></span>
<span><span class="co">#&gt; Running Auckland</span></span>
<span><span class="co">#&gt; Running SIRIS</span></span>
<span><span class="co">#&gt; Running SDSN</span></span>
<span><span class="co">#&gt; Running SDGO</span></span>
<span></span>
<span><span class="co"># count hits of systems</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">hits_all</span><span class="op">$</span><span class="va">system</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Auckland   Aurora Elsevier     SDGO     SDSN    SIRIS </span></span>
<span><span class="co">#&gt;      374       60      235     3629     2589      166</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="selecting-sdgs">Selecting SDGs<a class="anchor" aria-label="anchor" href="#selecting-sdgs"></a>
</h3>
<p>By default the <code><a href="../reference/detect_sdg.html">detect_sdg()</a></code> and
<code><a href="../reference/detect_sdg_systems.html">detect_sdg_systems()</a></code> will try to detect all 17 SDGs.
However, the user can limit the set of SDGs sought in text using the
<code>sdgs</code> argument, which takes a numeric vector with integers
in [1,17] as input. When using the <code><a href="../reference/detect_sdg_systems.html">detect_sdg_systems()</a></code>
function, the user should note that Elsevier, SIRIS and Auckland contain
queries only for the first 16 SDGs, exluding queries for goal 17 -
Global Partnerships for the Goals.</p>
<p>The example below runs the <code><a href="../reference/detect_sdg_systems.html">detect_sdg_systems()</a></code> function
only for SDGs 1, 2, 3, 4, and 5.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># detecting only for SDGs 1 to 5</span></span>
<span><span class="va">hits_sdg_subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/detect_sdg_systems.html">detect_sdg_systems</a></span><span class="op">(</span><span class="va">projects</span>, sdgs <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running Aurora</span></span>
<span><span class="co">#&gt; Running Elsevier</span></span>
<span><span class="co">#&gt; Running Auckland</span></span>
<span><span class="co">#&gt; Running SIRIS</span></span>
<span><span class="va">hits_sdg_subset</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 489 × 6</span></span></span>
<span><span class="co">#&gt;    document sdg    system   query_id features                                hit</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1        SDG-03 Auckland        3 tuberculosis, human, tuberculosis, d…     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1        SDG-03 Elsevier        3 tuberculosis, human, tuberculosis, d…     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2        SDG-03 Auckland        3 SARs                                      2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 3        SDG-03 Auckland        3 immunology, medicine                      3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 6        SDG-03 Auckland        3 cancer                                    4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 6        SDG-03 Elsevier        3 cancer                                    2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 8        SDG-03 Auckland        3 epidemics, epidemics, vaccine             5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 8        SDG-03 Elsevier        3 vaccine                                   3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9        SDG-03 Auckland        3 primary, care, primary, care, Primar…     6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 12       SDG-03 Auckland        3 epidemics                                 7</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 479 more rows</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="controlling-the-output">Controlling the output<a class="anchor" aria-label="anchor" href="#controlling-the-output"></a>
</h3>
<p>By default, <code><a href="../reference/detect_sdg_systems.html">detect_sdg_systems()</a></code> returns matches at the
level of query. If a system has multiple queries for a single SDG, the
output can include multiple hits (and rows) per document and system.
Separating hits by queries can be useful because different queries
typically capture different aspects of a given SDGs, which will be
revealed through the keywords that were matched by the queries. These
keyword matches are shown in the column <code>features</code> and,
hence, we refer to thsi type of output as <code>"features"</code>. If
the user is not interested in separating matches by queries and only
cares about matches at the level of documents, a reduced output can be
selected by setting the <code>output</code> argument to
<code>"documents"</code>. In this case, the
<code><a href="../reference/detect_sdg_systems.html">detect_sdg_systems()</a></code> returns a <code>tibble</code> that
includes only distinct matches of <code>document</code>,
<code>system</code>, and <code>sdg</code> combinations, concatenates the
values of <code>features</code> into a single character string, and
drops the column <code>query_id</code>.</p>
<p>The example below shows the alternative output resulting from setting
<code>output = "documents"</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># return documents output format</span></span>
<span><span class="fu"><a href="../reference/detect_sdg_systems.html">detect_sdg_systems</a></span><span class="op">(</span><span class="va">projects</span>, output <span class="op">=</span> <span class="st">"documents"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running Aurora</span></span>
<span><span class="co">#&gt; Running Elsevier</span></span>
<span><span class="co">#&gt; Running Auckland</span></span>
<span><span class="co">#&gt; Running SIRIS</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 791 × 5</span></span></span>
<span><span class="co">#&gt;    document sdg    system   n_hit features                                      </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1        SDG-03 Auckland     1 tuberculosis, human, tuberculosis, disease    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1        SDG-03 Elsevier     1 tuberculosis, human, tuberculosis, disease    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2        SDG-03 Auckland     1 SARs                                          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 3        SDG-03 Auckland     1 immunology, medicine                          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 6        SDG-03 Auckland     1 cancer                                        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 6        SDG-03 Elsevier     1 cancer                                        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 8        SDG-03 Auckland     1 epidemics, epidemics, vaccine                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 8        SDG-03 Elsevier     1 vaccine                                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9        SDG-03 Auckland     1 primary, care, primary, care, Primary, care, …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 12       SDG-03 Auckland     1 epidemics                                     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 781 more rows</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="keeping-track-of-progress">Keeping track of progress<a class="anchor" aria-label="anchor" href="#keeping-track-of-progress"></a>
</h3>
<p>By default the <code><a href="../reference/detect_sdg.html">detect_sdg()</a></code> and
<code><a href="../reference/detect_sdg_systems.html">detect_sdg_systems()</a></code> function prints messages to
communicate the progress of the underlying SDG detection process, which
can take several minutes. To suppress these messages, the user can set
the <code>verbose</code> argument to <code>FALSE</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="custom-search-with-detect_any">Custom search with <code>detect_any()</code><a class="anchor" aria-label="anchor" href="#custom-search-with-detect_any"></a>
</h2>
<p>The <code><a href="../reference/detect_any.html">detect_any()</a></code> function permits specification of
custom query systems. The function operates similarly to
<code><a href="../reference/detect_sdg_systems.html">detect_sdg_systems()</a></code>, but it requires an additional
argument <code>queries</code> that specifies the queries to be employed.
The <code>queries</code> argument expects a <code>tibble</code> with the
following columns:</p>
<ul>
<li>
<code>system</code> (<code>character</code>) - names used to label
query systems.</li>
<li>
<code>queries</code> (<code>character</code>) - queries used in
search.</li>
<li>
<code>sdg</code> (<code>integer</code>) - mapping of queries to
SDGs.</li>
</ul>
<p>The queries in the custom query set can be Lucene-style queries
following the syntax of the <code>corpustools</code> package. See
<code>vignette("corpustools")</code>. This is illustrated in the example
below. First, a tibble of three queries is defined that includes a
single system and three queries that are mapped onto two sdgs, 3 and 7.
The first query represents a simple keyword search, whereas queries 2
and 3 are proper search queries using logical operators.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># definition of query set</span></span>
<span><span class="va">my_queries</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  system <span class="op">=</span> <span class="st">"my_system"</span>,</span>
<span>  query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"theory"</span>, <span class="st">"analysis OR analyses OR analyzed"</span>, <span class="st">"study AND hypothesis"</span><span class="op">)</span>,</span>
<span>  sdg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">7</span>, <span class="fl">7</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># return documents output format</span></span>
<span><span class="fu"><a href="../reference/detect_any.html">detect_any</a></span><span class="op">(</span></span>
<span>  text <span class="op">=</span> <span class="va">projects</span>,</span>
<span>  system <span class="op">=</span> <span class="va">my_queries</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 280 × 6</span></span></span>
<span><span class="co">#&gt;    document sdg    system    query_id features             hit</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2        SDG-07 my_system        2 analysis              62</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 4        SDG-07 my_system        2 analysis             189</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 8        SDG-07 my_system        2 analyses, analysis   267</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 9        SDG-07 my_system        2 analysis             274</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 10       SDG-07 my_system        2 analysis, analyses     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 11       SDG-07 my_system        2 analysis               6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 13       SDG-07 my_system        3 hypothesis, study     19</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 15       SDG-07 my_system        2 analysis              28</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 15       SDG-07 my_system        3 study, hypothesis     29</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 16       SDG-07 my_system        2 analyzed              39</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 270 more rows</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="visualizing-hits-with-plot_sdg">Visualizing hits with <code>plot_sdg()</code><a class="anchor" aria-label="anchor" href="#visualizing-hits-with-plot_sdg"></a>
</h2>
<p>To visualize the hits produced by the <code>detect_*</code>
functions, the <code>text2sdg</code> package provides the function
<code><a href="../reference/plot_sdg.html">plot_sdg()</a></code>. The function produces barplots illustrating
either the hit frequencies produced by the different query systems. It
is built on the <code>ggplot2</code> package, which provides high levels
of flexibility for adapting and extending its visualizations.</p>
<p>By default <code><a href="../reference/plot_sdg.html">plot_sdg()</a></code> produces a stacked barplot of
absolute hit frequencies. Frequencies are determined on the document
level for each system and SDGs present in the <code>tibble</code> that
was provided to the function’s <code>hits</code> argument. If multiple
hits per document, system and SDG combination exist, the function
returns a message of how many duplicate hits have been suppressed.</p>
<p>The example below produces the default visualization for the hits of
all five systems. Since the object was created with
<code>"output = features"</code>, the function informs that a total of
2490 duplicate hits were removed.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># show stacked barplot of hits</span></span>
<span><span class="fu"><a href="../reference/plot_sdg.html">plot_sdg</a></span><span class="op">(</span><span class="va">hits_all</span><span class="op">)</span></span>
<span><span class="co">#&gt; 2511 duplicate hits removed. Set remove_duplicates = FALSE to retain duplicates.</span></span></code></pre></div>
<p><img src="text2sdg_files/figure-html/unnamed-chunk-10-1.png" width="672"></p>
<div class="section level3">
<h3 id="adjusting-visualizations">Adjusting visualizations<a class="anchor" aria-label="anchor" href="#adjusting-visualizations"></a>
</h3>
<p>The <code><a href="../reference/plot_sdg.html">plot_sdg()</a></code> function has several arguments that
permit adjustment of the visualization. The <code>systems</code> and
<code>sdgs</code> arguments can be used to visualize subsets of systems
and/or SDGs. The <code>normalize</code> argument can be used to
normalize the absolute frequency by the number of documents
(<code>normalize = "documents"</code>) or by the total number of hits
within a system (<code>normalize = "systems"</code>). The
<code>color</code> argument can be used to adapt the color set used for
the systems. The <code>sdg_titles</code> argument can be used to add the
full titles of the SDGs. The <code>remove_duplicates</code> argument can
be used to retain any duplicate hits of document, system, and SDG
combinations. Finally, the <code>...</code> arguments can be used to
pass on additional arguments to the <code>geom_bar()</code> function
that underlies <code><a href="../reference/detect_sdg_systems.html">detect_sdg_systems()</a></code>.</p>
<p>The example below uses some of the available arguments to make
adjustments to the default visualization. With
<code>normalize = "systems"</code> and <code>position = "dodge"</code>,
an argument passed to <code>geom_bar()</code>, it shows the proportion
of SDG hits per system with bars presented side-by-side rather than
stacked. Furthermore, due to <code>sdg_titles = TRUE</code> the full
titles are shown rather than SDG numbers.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># show normalized, side-by-side barplot of hits</span></span>
<span><span class="fu"><a href="../reference/plot_sdg.html">plot_sdg</a></span><span class="op">(</span><span class="va">hits_all</span>,</span>
<span>  sdg_titles <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  normalize <span class="op">=</span> <span class="st">"systems"</span>,</span>
<span>  position <span class="op">=</span> <span class="st">"dodge"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; 2511 duplicate hits removed. Set remove_duplicates = FALSE to retain duplicates.</span></span></code></pre></div>
<p><img src="text2sdg_files/figure-html/unnamed-chunk-11-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="extending-visualizations-with-ggplot2">Extending visualizations with <code>ggplot2</code><a class="anchor" aria-label="anchor" href="#extending-visualizations-with-ggplot2"></a>
</h3>
<p>Because <code><a href="../reference/plot_sdg.html">plot_sdg()</a></code> is implemented using
<code>ggplot2</code>, visualizations can easily be extended using
functions from the <code>ggplot2</code> universe. The example below
illustrates this. Using the <code>facet_wrap</code> function separate
panels are created, one for each system, that show the absolute
frequencies of hits per SDG.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># show system hits in separate panels</span></span>
<span><span class="fu"><a href="../reference/plot_sdg.html">plot_sdg</a></span><span class="op">(</span><span class="va">hits_all</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">system</span>, ncol <span class="op">=</span> <span class="fl">1</span>, scales <span class="op">=</span> <span class="st">"free_y"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 2511 duplicate hits removed. Set remove_duplicates = FALSE to retain duplicates.</span></span></code></pre></div>
<p><img src="text2sdg_files/figure-html/unnamed-chunk-12-1.png" width="672"></p>
</div>
</div>
<div class="section level2">
<h2 id="analyzing-hits-using-crosstab_sdg">Analyzing hits using <code>crosstab_sdg()</code><a class="anchor" aria-label="anchor" href="#analyzing-hits-using-crosstab_sdg"></a>
</h2>
<p>To assist the user in understanding the relationships among SDGs and
query systems, the <code>text2sdg</code> package provides the
<code><a href="../reference/crosstab_sdg.html">crosstab_sdg()</a></code> function. The function takes as input the
<code>tibble</code> of hits produced by any of the detect functions and
compares hits between either systems or SDGs. Comparing hits by system
means that correlations are determined across all documents and all SDGs
for every pair of systems to produce a fully crossed table of system
correlations. Conversely, comparing hits by SDG means that correlations
are determined across all documents and all systems for every pair of
SDGs to produce a fully crossed table of SDG correlations.</p>
<div class="section level3">
<h3 id="correspondence-between-query-systems">Correspondence between query systems<a class="anchor" aria-label="anchor" href="#correspondence-between-query-systems"></a>
</h3>
<p>By default the <code><a href="../reference/crosstab_sdg.html">crosstab_sdg()</a></code> function compares
<code>systems</code>, which is illustrated below for the hits for all
five systems. Note that the <code><a href="../reference/crosstab_sdg.html">crosstab_sdg()</a></code> function only
considers distinct combinations of documents, systems, and SDGs implying
that the output type of <code><a href="../reference/detect_sdg_systems.html">detect_sdg_systems()</a></code> does not
matter; it will automatically treat the hits as if they had been
produced using <code>output = documents</code>.</p>
<p>The analysis reveals two noteworthy results. First, correlations
between systems are overall rather small. Second, query systems are more
similar to systems of the same type, i.e., query or keyword-based.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># evaluate correspondence between systems</span></span>
<span><span class="fu"><a href="../reference/crosstab_sdg.html">crosstab_sdg</a></span><span class="op">(</span><span class="va">hits_all</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt;          Auckland Aurora Elsevier SDGO SDSN SIRIS</span></span>
<span><span class="co">#&gt; Auckland     1.00   0.26     0.75 0.34 0.27  0.32</span></span>
<span><span class="co">#&gt; Aurora       0.26   1.00     0.24 0.14 0.12  0.30</span></span>
<span><span class="co">#&gt; Elsevier     0.75   0.24     1.00 0.29 0.23  0.27</span></span>
<span><span class="co">#&gt; SDGO         0.34   0.14     0.29 1.00 0.35  0.19</span></span>
<span><span class="co">#&gt; SDSN         0.27   0.12     0.23 0.35 1.00  0.19</span></span>
<span><span class="co">#&gt; SIRIS        0.32   0.30     0.27 0.19 0.19  1.00</span></span></code></pre></div>
<p>When <code><a href="../reference/crosstab_sdg.html">crosstab_sdg()</a></code> evaluates the correspondence between
query systems it does not distinguish between hits of different SDGs.
Correlations for individual SDGs could be different from the overall
correlations, and it is likely that they are higher, on average. To
determine the correspondence between query systems for individual SDGs,
the user can use the <code>sdgs</code> argument. For instance,
<code>sdgs = 1</code> will only result in a comparison of systems using
only hits of SDG 1.</p>
</div>
<div class="section level3">
<h3 id="correspondence-between-sdgs">Correspondence between SDGs<a class="anchor" aria-label="anchor" href="#correspondence-between-sdgs"></a>
</h3>
<p>The <code><a href="../reference/crosstab_sdg.html">crosstab_sdg()</a></code> can also be used to analyze, in a
similar fashion, the correspondence between SDGs. To do this, the
<code>compare</code> argument must be set to <code>"sdgs"</code>. Again,
correlations are calculated for distinct hits, while ignoring, in this
case, the systems from which the hits originated.</p>
<p>The example below analyzes the correspondence of all SDGs across all
systems. The resulting cross table reveals strong correspondences
between certain pairs of SDGs, such as, for instance, between
<code>SDG-01</code> and <code>SDG-02</code> or between
<code>SDG-07</code> and <code>SDG-13</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># evaluate correspondence between systems</span></span>
<span><span class="fu"><a href="../reference/crosstab_sdg.html">crosstab_sdg</a></span><span class="op">(</span><span class="va">hits_all</span>, compare <span class="op">=</span> <span class="st">"sdgs"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt;        SDG-01 SDG-02 SDG-03 SDG-04 SDG-05 SDG-06 SDG-07 SDG-08 SDG-09 SDG-10</span></span>
<span><span class="co">#&gt; SDG-01   1.00   0.44   0.04   0.06   0.13   0.18   0.08   0.17   0.32   0.19</span></span>
<span><span class="co">#&gt; SDG-02   0.44   1.00   0.10   0.07   0.06   0.16   0.12   0.15   0.28   0.14</span></span>
<span><span class="co">#&gt; SDG-03   0.04   0.10   1.00   0.18   0.15   0.03   0.00   0.18   0.13   0.29</span></span>
<span><span class="co">#&gt; SDG-04   0.06   0.07   0.18   1.00   0.14   0.08   0.09   0.18   0.16   0.26</span></span>
<span><span class="co">#&gt; SDG-05   0.13   0.06   0.15   0.14   1.00   0.11   0.05   0.10   0.15   0.20</span></span>
<span><span class="co">#&gt; SDG-06   0.18   0.16   0.03   0.08   0.11   1.00   0.19   0.17   0.19   0.11</span></span>
<span><span class="co">#&gt; SDG-07   0.08   0.12   0.00   0.09   0.05   0.19   1.00   0.14   0.28   0.10</span></span>
<span><span class="co">#&gt; SDG-08   0.17   0.15   0.18   0.18   0.10   0.17   0.14   1.00   0.37   0.33</span></span>
<span><span class="co">#&gt; SDG-09   0.32   0.28   0.13   0.16   0.15   0.19   0.28   0.37   1.00   0.31</span></span>
<span><span class="co">#&gt; SDG-10   0.19   0.14   0.29   0.26   0.20   0.11   0.10   0.33   0.31   1.00</span></span>
<span><span class="co">#&gt; SDG-11   0.22   0.21   0.17   0.20   0.16   0.32   0.22   0.28   0.33   0.29</span></span>
<span><span class="co">#&gt; SDG-12   0.24   0.26   0.07   0.06   0.07   0.29   0.29   0.15   0.31   0.14</span></span>
<span><span class="co">#&gt; SDG-13   0.06   0.07  -0.04   0.04   0.02   0.21   0.37   0.07   0.15   0.04</span></span>
<span><span class="co">#&gt; SDG-14   0.05   0.08   0.01   0.02   0.02   0.14   0.14   0.09   0.09   0.08</span></span>
<span><span class="co">#&gt; SDG-15   0.08   0.16   0.10   0.05   0.03   0.21   0.13   0.18   0.21   0.12</span></span>
<span><span class="co">#&gt; SDG-16   0.14   0.10   0.12   0.25   0.33   0.13   0.05   0.23   0.18   0.25</span></span>
<span><span class="co">#&gt; SDG-17  -0.01   0.02   0.22   0.25   0.05   0.05   0.00   0.15   0.05   0.21</span></span>
<span><span class="co">#&gt;        SDG-11 SDG-12 SDG-13 SDG-14 SDG-15 SDG-16 SDG-17</span></span>
<span><span class="co">#&gt; SDG-01   0.22   0.24   0.06   0.05   0.08   0.14  -0.01</span></span>
<span><span class="co">#&gt; SDG-02   0.21   0.26   0.07   0.08   0.16   0.10   0.02</span></span>
<span><span class="co">#&gt; SDG-03   0.17   0.07  -0.04   0.01   0.10   0.12   0.22</span></span>
<span><span class="co">#&gt; SDG-04   0.20   0.06   0.04   0.02   0.05   0.25   0.25</span></span>
<span><span class="co">#&gt; SDG-05   0.16   0.07   0.02   0.02   0.03   0.33   0.05</span></span>
<span><span class="co">#&gt; SDG-06   0.32   0.29   0.21   0.14   0.21   0.13   0.05</span></span>
<span><span class="co">#&gt; SDG-07   0.22   0.29   0.37   0.14   0.13   0.05   0.00</span></span>
<span><span class="co">#&gt; SDG-08   0.28   0.15   0.07   0.09   0.18   0.23   0.15</span></span>
<span><span class="co">#&gt; SDG-09   0.33   0.31   0.15   0.09   0.21   0.18   0.05</span></span>
<span><span class="co">#&gt; SDG-10   0.29   0.14   0.04   0.08   0.12   0.25   0.21</span></span>
<span><span class="co">#&gt; SDG-11   1.00   0.32   0.17   0.12   0.18   0.26   0.18</span></span>
<span><span class="co">#&gt; SDG-12   0.32   1.00   0.13   0.10   0.19   0.09   0.08</span></span>
<span><span class="co">#&gt; SDG-13   0.17   0.13   1.00   0.28   0.28   0.01   0.00</span></span>
<span><span class="co">#&gt; SDG-14   0.12   0.10   0.28   1.00   0.21  -0.01   0.01</span></span>
<span><span class="co">#&gt; SDG-15   0.18   0.19   0.28   0.21   1.00   0.07   0.11</span></span>
<span><span class="co">#&gt; SDG-16   0.26   0.09   0.01  -0.01   0.07   1.00   0.18</span></span>
<span><span class="co">#&gt; SDG-17   0.18   0.08   0.00   0.01   0.11   0.18   1.00</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Dirk U. Wulff, Dominik S. Meier.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
